I"šX<h1 id="what-is-it">What is it?</h1>
<p>finding-PORTy is a proof of concept fully functional port scanning tool designed to check open ports, check live host in a network, stealth scans, and keep activity data for later use. I wrote it on Python 3 so the codebase is supposed to be easily understandable and modified for further use.</p>

<p>hereâ€™s what the menu looks like</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    |<span class="se">\ </span>   o
    |  <span class="se">\ </span>   o
|<span class="se">\ </span>/    .<span class="se">\ </span>o
| |       <span class="o">(</span> <span class="o">======[</span>finding-PORTy v1.]<span class="o">======</span>
|/ <span class="se">\ </span>    /
    |  /
     |/
                    


<span class="o">===[</span>OPTIONS]<span class="o">===</span> 
 <span class="o">[</span>1] Scan Open Ports 
 <span class="o">[</span>2] Ping Sweep Live Host <span class="o">(</span>Loud<span class="o">)</span> 
 <span class="o">[</span>3] TCP Scan <span class="o">(</span>Stealth<span class="o">)</span> 
 <span class="o">[</span>4] Show Activities 
 <span class="o">[</span>5] Remove History
 <span class="o">[</span>0] Exit
Action: 
</code></pre></div></div>

<h1 id="she-bang">She bang!</h1>
<p>the basic gist of this is to define and let the OS know that itâ€™s a python script and points to the correct interterpreter directly in your code so instead of doing <code class="highlighter-rouge">$ python scan.py</code> in order to run your code, you can simply make it executable by <code class="highlighter-rouge">sudo chmod 775 scan.py</code> and run it like this <code class="highlighter-rouge">./scan.py</code></p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#!/usr/bin/env python3
</span>
<span class="c1">#import curses #for console interface...soon
</span><span class="kn">from</span> <span class="nn">socket</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">multiprocessing</span>
<span class="kn">import</span> <span class="nn">subprocess</span>
<span class="kn">import</span> <span class="nn">csv</span>

<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

<span class="k">def</span> <span class="nf">check_history</span><span class="p">():</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">'session.csv'</span><span class="p">,</span><span class="s">'rb'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">reader</span><span class="o">=</span><span class="n">csv</span><span class="p">.</span><span class="n">reader</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
    <span class="k">except</span><span class="p">:</span>
         <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">'session.csv'</span><span class="p">,</span><span class="s">'a'</span><span class="p">,</span> <span class="n">newline</span><span class="o">=</span><span class="s">''</span><span class="p">)</span> <span class="k">as</span> <span class="n">csvfile</span><span class="p">:</span>
             <span class="n">filewriter</span> <span class="o">=</span> <span class="n">csv</span><span class="p">.</span><span class="n">writer</span><span class="p">(</span><span class="n">csvfile</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s">','</span><span class="p">,</span> 
                                     <span class="n">quotechar</span><span class="o">=</span><span class="s">'|'</span><span class="p">,</span> <span class="n">quoting</span><span class="o">=</span><span class="n">csv</span><span class="p">.</span><span class="n">QUOTE_MINIMAL</span><span class="p">)</span>
             <span class="n">currentDate</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="n">now</span><span class="p">()</span>
             <span class="n">filewriter</span><span class="p">.</span><span class="n">writerow</span><span class="p">([</span><span class="n">currentDate</span><span class="p">])</span>

<span class="k">def</span> <span class="nf">show_history</span><span class="p">():</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">'session.csv'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">reader</span> <span class="o">=</span> <span class="n">csv</span><span class="p">.</span><span class="n">reader</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">reader</span><span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">pass</span>

<span class="k">def</span> <span class="nf">write_history</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">'session.csv'</span><span class="p">,</span><span class="s">'a'</span><span class="p">,</span> <span class="n">newline</span><span class="o">=</span><span class="s">''</span><span class="p">)</span> <span class="k">as</span> <span class="n">csvfile</span><span class="p">:</span> 
        <span class="n">filewriter</span> <span class="o">=</span> <span class="n">csv</span><span class="p">.</span><span class="n">writer</span><span class="p">(</span><span class="n">csvfile</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s">','</span><span class="p">,</span> 
                                <span class="n">quotechar</span><span class="o">=</span><span class="s">'|'</span><span class="p">,</span> <span class="n">quoting</span><span class="o">=</span><span class="n">csv</span><span class="p">.</span><span class="n">QUOTE_MINIMAL</span><span class="p">)</span>
        <span class="n">currentDate</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="n">now</span><span class="p">()</span>
        <span class="n">data1</span> <span class="o">=</span> <span class="n">action</span>
        <span class="n">data2</span> <span class="o">=</span> <span class="n">data</span>
        <span class="n">filewriter</span><span class="p">.</span><span class="n">writerow</span><span class="p">([</span><span class="n">data1</span><span class="p">,</span> <span class="n">data2</span><span class="p">])</span>

<span class="k">def</span> <span class="nf">socket_Scan</span><span class="p">(</span><span class="n">targetIP</span><span class="p">,</span> <span class="n">write_history</span><span class="p">):</span>
    <span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="n">now</span><span class="p">()</span>
    <span class="n">timer</span> <span class="o">=</span> <span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span>
    <span class="n">host</span> <span class="o">=</span> <span class="n">gethostbyname</span><span class="p">(</span><span class="n">targetIP</span><span class="p">)</span>
    <span class="n">action</span> <span class="o">=</span> <span class="s">'-------------------Port Scan--------------------- </span><span class="se">\n</span><span class="s">'</span>
    <span class="n">write_history</span><span class="p">(</span><span class="n">action</span><span class="p">,</span><span class="n">dt</span><span class="p">)</span>

    <span class="k">print</span><span class="p">(</span><span class="s">'Scanning...'</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">65535</span><span class="p">):</span>
        <span class="n">soc</span> <span class="o">=</span> <span class="n">socket</span><span class="p">(</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">SOCK_STREAM</span><span class="p">)</span>
        <span class="n">connect</span> <span class="o">=</span> <span class="n">soc</span><span class="p">.</span><span class="n">connect_ex</span><span class="p">((</span><span class="n">host</span><span class="p">,</span> <span class="n">i</span><span class="p">))</span>
        
        <span class="k">if</span><span class="p">(</span><span class="n">connect</span> <span class="o">==</span> <span class="mi">0</span><span class="p">):</span>
            <span class="k">print</span><span class="p">(</span><span class="s">'Port %d: -&gt;[OPEN]'</span><span class="o">%</span><span class="p">(</span><span class="n">i</span><span class="p">,))</span>
            <span class="n">data</span> <span class="o">=</span> <span class="s">'Port %d: -&gt;[OPEN]}'</span><span class="o">%</span><span class="p">(</span><span class="n">i</span><span class="p">,)</span>
            <span class="n">soc</span><span class="p">.</span><span class="n">close</span><span class="p">()</span>
            <span class="n">write_history</span><span class="p">(</span><span class="s">''</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
    <span class="n">time_taken</span> <span class="o">=</span> <span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">timer</span>
    <span class="n">write_history</span><span class="p">(</span><span class="s">'time taken ='</span><span class="p">,</span><span class="n">time_taken</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'time taken = '</span><span class="p">,</span> <span class="n">time_taken</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">ping_Sweep</span><span class="p">(</span><span class="n">job_q</span><span class="p">,</span> <span class="n">results_q</span><span class="p">):</span>
    <span class="n">DEVNULL</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="p">.</span><span class="n">devnull</span><span class="p">,</span> <span class="s">'w'</span><span class="p">)</span>    
    
    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
        <span class="n">ip</span> <span class="o">=</span> <span class="n">job_q</span><span class="p">.</span><span class="n">get</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">ip</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">break</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">subprocess</span><span class="p">.</span><span class="n">check_call</span><span class="p">([</span><span class="s">'ping'</span><span class="p">,</span><span class="s">'-c1'</span><span class="p">,</span><span class="n">ip</span><span class="p">],</span> 
                                <span class="n">stdout</span> <span class="o">=</span> <span class="n">DEVNULL</span><span class="p">)</span>
            <span class="n">results_q</span><span class="p">.</span><span class="n">put</span><span class="p">(</span><span class="n">ip</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>

<span class="k">def</span> <span class="nf">menu</span><span class="p">():</span>
    
    <span class="k">print</span><span class="p">(</span><span class="s">""" 
    |\    o
    |  \    o
|\ /    .\ o
| |       ( ======[finding-PORTy v1.]======
|/ \     /
    |  /
     |/
                    """</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'</span><span class="se">\n</span><span class="s">'</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'===[OPTIONS]=== </span><span class="se">\n</span><span class="s"> [1] Scan Open Ports </span><span class="se">\n</span><span class="s"> [2] Ping Sweep Live Host (Loud) </span><span class="se">\n</span><span class="s"> [3] TCP Scan (Stealth) </span><span class="se">\n</span><span class="s"> [4] Show Activities </span><span class="se">\n</span><span class="s"> [5] Remove History </span><span class="se">\n</span><span class="s"> [0] Exit'</span><span class="p">)</span>
    <span class="k">while</span><span class="p">(</span><span class="bp">True</span><span class="p">):</span>
        <span class="n">action</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">'Action: '</span><span class="p">)</span>    

        <span class="k">if</span><span class="p">(</span><span class="n">action</span> <span class="o">==</span> <span class="s">'1'</span><span class="p">):</span>
            <span class="n">targetIP</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">'===[Scan Open Ports]=== </span><span class="se">\n</span><span class="s"> Enter IP: '</span><span class="p">)</span>
            <span class="n">check_history</span><span class="p">()</span>
            <span class="n">socket_Scan</span><span class="p">(</span><span class="n">targetIP</span><span class="p">,</span> <span class="n">write_history</span><span class="p">)</span>
    
        <span class="k">elif</span><span class="p">(</span><span class="n">action</span> <span class="o">==</span> <span class="s">'2'</span><span class="p">):</span>
            <span class="n">check_history</span><span class="p">()</span>
            <span class="n">action</span> <span class="o">=</span> <span class="s">'-------------------Ping Sweep Live Host--------------------- </span><span class="se">\n</span><span class="s">'</span>
            <span class="n">data</span> <span class="o">=</span> <span class="s">'Scanning'</span>
            <span class="n">write_history</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>

            <span class="n">size</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s">'===[Ping Sweep Live Host]=== </span><span class="se">\n</span><span class="s"> Enter Range(1 to ?): '</span><span class="p">))</span>
            <span class="n">targetNetwork</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s">'</span><span class="se">\n</span><span class="s"> Enter Network IP: '</span><span class="p">)</span>
            <span class="n">splitIP</span> <span class="o">=</span> <span class="n">targetNetwork</span><span class="p">.</span><span class="n">split</span><span class="p">(</span><span class="s">'.'</span><span class="p">)</span>
            <span class="n">x</span> <span class="o">=</span> <span class="s">'.'</span>

            <span class="n">reconIP</span> <span class="o">=</span> <span class="n">size</span> <span class="o">+</span> <span class="mi">1</span>

            <span class="n">jobs</span> <span class="o">=</span> <span class="n">multiprocessing</span><span class="p">.</span><span class="n">Queue</span><span class="p">()</span>
            <span class="n">results</span> <span class="o">=</span> <span class="n">multiprocessing</span><span class="p">.</span><span class="n">Queue</span><span class="p">()</span>
            <span class="n">pool</span> <span class="o">=</span> <span class="p">[</span><span class="n">multiprocessing</span><span class="p">.</span><span class="n">Process</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">ping_Sweep</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">jobs</span><span class="p">,</span> <span class="n">results</span><span class="p">))</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">size</span><span class="p">)</span> <span class="p">]</span>

            <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">pool</span><span class="p">:</span>
                <span class="n">p</span><span class="p">.</span><span class="n">start</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">size</span><span class="p">):</span>
                <span class="n">fnetwork</span> <span class="o">=</span> <span class="n">splitIP</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">x</span> <span class="o">+</span> <span class="n">splitIP</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">x</span> <span class="o">+</span> <span class="n">splitIP</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="n">x</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="c1">#tricky hack on splitting ip
</span>                <span class="n">jobs</span><span class="p">.</span><span class="n">put</span><span class="p">(</span><span class="n">fnetwork</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">pool</span><span class="p">:</span>
                <span class="n">jobs</span><span class="p">.</span><span class="n">put</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">pool</span><span class="p">:</span>
                <span class="n">p</span><span class="p">.</span><span class="n">join</span><span class="p">()</span>

            <span class="k">while</span> <span class="ow">not</span> <span class="n">results</span><span class="p">.</span><span class="n">empty</span><span class="p">():</span>
                <span class="n">liveIP</span> <span class="o">=</span> <span class="n">results</span><span class="p">.</span><span class="n">get</span><span class="p">()</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">liveIP</span><span class="p">,</span><span class="s">'---&gt; we got a live one!'</span>
                <span class="n">dateTime</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="n">now</span><span class="p">()</span>
                <span class="n">write_history</span><span class="p">(</span><span class="n">dateTime</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
                <span class="k">print</span><span class="p">(</span><span class="n">liveIP</span><span class="p">,</span> <span class="s">'---&gt; we got a live one!'</span><span class="p">)</span>
            
        <span class="k">elif</span><span class="p">(</span><span class="n">action</span> <span class="o">==</span> <span class="s">'3'</span><span class="p">):</span>
            <span class="k">print</span><span class="p">(</span><span class="s">'will add soon...'</span><span class="p">)</span>
    
        <span class="k">elif</span><span class="p">(</span><span class="n">action</span> <span class="o">==</span> <span class="s">'4'</span><span class="p">):</span>
            <span class="n">show_history</span><span class="p">()</span>

        <span class="k">elif</span><span class="p">(</span><span class="n">action</span> <span class="o">==</span> <span class="s">'5'</span><span class="p">):</span>
            <span class="k">print</span><span class="p">(</span><span class="s">'will add soon...'</span><span class="p">)</span>
        <span class="k">elif</span><span class="p">(</span><span class="n">action</span> <span class="o">==</span> <span class="s">'0'</span><span class="p">):</span>
            <span class="nb">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s">'incorrect option...'</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>   
    <span class="n">menu</span><span class="p">()</span> 

</code></pre></div></div>

<h1 id="conclusion">Conclusion</h1>
<p>Learning curve is a minor setback, you are living in 21st Century different information, tutorials, documentations and overall human knowledge is available on the internet, anything can be learned. React.js is a pretty good front-end framework, in order to complete a full stack project you have to use a different framework and runtime to finish the back-end you can use Node.js and Express.js web framework for your REST API, even better if you add GraphQL on the mix. This industry is changing month by month and itâ€™s up to you to catch up and learn.</p>

<p><a href="https://github.com/AdrianDucao/devlog">Sample Code</a>
<a href="https://www.youtube.com/c/AMACTechtipsPhilippines/videos?view_as=subscriber">Dev Vlog</a></p>

<p>Happy Coding.</p>
:ET